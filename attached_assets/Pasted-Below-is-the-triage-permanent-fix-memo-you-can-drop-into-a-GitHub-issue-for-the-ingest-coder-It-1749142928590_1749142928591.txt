Below is the “triage + permanent fix” memo you can drop into a GitHub issue for the ingest coder.
It explains why BYU came back as Independent, why Texas is still tagged Big 12, and what to do so the new **apinext** endpoint always returns season-correct conference data.

---

## 1 — What went wrong

1. **You switched from `api.collegefootballdata.com/v1` to `apinext.collegefootballdata.com`**.
   The new API collapses or renames several fields:

   * `conference` → `conferenceId` (numeric)
   * Teams endpoint now requires an explicit `year=` query or you get the **current** alignment.
2. Because the ingest didn’t pass `year=2024`, the teams lookup returned the 2025 alignments:

   * BYU shows `conferenceId=null` (Independent again in 2025 sample data).
   * Texas still in the JSON for Big 12 because the sample payload hasn’t updated yet.
3. Your canonical map then applied those incorrect conferences to every 2024 game row.

---

## 2 — Fix in three commits

### Commit A — pin the correct “teams for season” call

```python
# before
resp = requests.get(f"{API}/teams/fbs")       # returns default (current) season

# after
resp = requests.get(f"{API}/teams/fbs?year={season}")
```

Grab and store `conferenceId`, `school`, `abbreviation` for that **specific** year.

---

### Commit B — lookup conference name via `/conferences` once per season

```python
conf_map = {c['id']: c['name'] for c in requests.get(f"{API}/conferences").json()}
team_conf_name = conf_map.get(team_row['conferenceId'])
```

That way realignment auto-adjusts with zero manual YAML edits.

---

### Commit C — enforce ingest assertion

Add:

```python
assert row['home_conference'] in CONF_LIST_2024, f"bad conf {row['home_conference']}"
```

Where `CONF_LIST_2024` is built from the same season-specific `/teams` pull.
If the API drifts, the assertion fails and the CI run goes red.

---

## 3 — One-time clean-up

* **Flush `canonical_2024.yaml`** — regenerate from the season-specific teams list so BYU→Big 12, Texas→SEC, etc.
* **Delete cached processed files** for 2024, rerun live pipeline.
* BYU should jump to \~top 20, Big 12 teams repopulate top 40, Texas appears as SEC.

---

## 4 — Guard for all future seasons

1. Ingest job first calls `/seasons` (new endpoint) to pull the list of valid years.
2. Fail fast if the requested season isn’t returned — ensures we never mix “current” with historical.
3. Store the raw `/teams?year=YYYY` payload in `data/raw/teams_YYYY.json`; checksum it like games.

---

## 5 — Sanity test after fix

```python
assert team_to_conf['BYU', 2024] == 'Big 12'
assert team_to_conf['Texas', 2024] == 'SEC'
assert len([t for t,r in R.items() if conf[t]=='Big 12' and r>0.008]) >= 4
```

If those pass, the alignment layer is working.

---

### End result

All conference IDs now come straight from CFBD for the exact season you’re rating, eliminating manual realignment headaches and preventing “BYU is Independent again” surprises.
